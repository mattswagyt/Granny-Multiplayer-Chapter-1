-- Roblox Lua Script for "Granny Multiplayer - Chapter 1" Map (By BMF)
-- Script handles a draggable UI with multiple functionalities

-- Variables
local Players = game:GetService("Players")
local Lighting = game:GetService("Lighting")
local StarterGui = game:GetService("StarterGui")
local UIS = game:GetService("UserInputService")
local LocalPlayer = Players.LocalPlayer
local PlayerGui = LocalPlayer:WaitForChild("PlayerGui")

-- Create UI Elements
local ScreenGui = Instance.new("ScreenGui")
local MainFrame = Instance.new("Frame")
local Title = Instance.new("TextLabel")
local LocationLabel = Instance.new("TextLabel")
local ErrorLog = Instance.new("TextLabel")
local CodeLabel = Instance.new("TextLabel") -- ‚úÖ NEW LABEL
local UIListLayout = Instance.new("UIListLayout")

-- UI Properties
ScreenGui.Parent = PlayerGui
ScreenGui.ResetOnSpawn = false
ScreenGui.Name = "GrannyUI"

MainFrame.Parent = ScreenGui
MainFrame.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
MainFrame.Size = UDim2.new(0, 300, 0, 400)
MainFrame.Position = UDim2.new(0.5, -150, 0.5, -200)
MainFrame.Active = true
MainFrame.Draggable = true
MainFrame.Visible = true

Title.Parent = MainFrame
Title.Text = "Granny Multiplayer - Chapter 1 (By BMF)"
Title.Size = UDim2.new(1, 0, 0, 30)
Title.BackgroundColor3 = Color3.fromRGB(45, 45, 45)
Title.TextColor3 = Color3.fromRGB(255, 255, 255)
Title.Font = Enum.Font.SourceSansBold
Title.TextSize = 18

ErrorLog.Parent = MainFrame
ErrorLog.Text = "Error Log: None"
ErrorLog.Size = UDim2.new(1, 0, 0, 30)
ErrorLog.BackgroundColor3 = Color3.fromRGB(45, 45, 45)
ErrorLog.TextColor3 = Color3.fromRGB(255, 85, 85)
ErrorLog.Font = Enum.Font.SourceSans
ErrorLog.TextSize = 14
ErrorLog.TextWrapped = true
ErrorLog.TextYAlignment = Enum.TextYAlignment.Top

-- ‚úÖ NEW CODE LABEL BELOW ERROR LOG
CodeLabel.Parent = MainFrame
CodeLabel.Text = "Code: Searching..."
CodeLabel.Size = UDim2.new(1, 0, 0, 25)
CodeLabel.BackgroundColor3 = Color3.fromRGB(45, 45, 45)
CodeLabel.TextColor3 = Color3.fromRGB(200, 200, 200)
CodeLabel.Font = Enum.Font.SourceSans
CodeLabel.TextSize = 14
CodeLabel.TextWrapped = false
CodeLabel.TextYAlignment = Enum.TextYAlignment.Center

-- Code value reader loop (preset1‚Äìpreset10)
task.spawn(function()
    while true do
        local foundCode = false

        for i = 1, 10 do
            local preset = workspace:FindFirstChild("Preset" .. i)
            if preset and preset:FindFirstChild("Locks") then
                local codeVal = preset.Locks:FindFirstChild("CodeValue")

                if codeVal then
                    CodeLabel.Text = "Code: " .. tostring(codeVal.Value)
                    foundCode = true
                    break
                end
            end
        end

        if not foundCode then
            CodeLabel.Text = "Code: Not Found"
        end

        task.wait(0.2)
    end
end)

UIListLayout.Parent = MainFrame
UIListLayout.SortOrder = Enum.SortOrder.LayoutOrder

-- Toggle UI with Delete key
UIS.InputBegan:Connect(function(input, processed)
    if not processed and input.KeyCode == Enum.KeyCode.Delete then
        MainFrame.Visible = not MainFrame.Visible
    end
end)

-- Function to Create Buttons
local function createButton(name, callback)
    local Button = Instance.new("TextButton")
    Button.Parent = MainFrame
    Button.Text = name
    Button.Size = UDim2.new(1, 0, 0, 30)
    Button.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
    Button.TextColor3 = Color3.fromRGB(255, 255, 255)
    Button.Font = Enum.Font.SourceSans
    Button.TextSize = 16
    Button.MouseButton1Click:Connect(function()
        pcall(callback)
    end)
    return Button
end

createButton("Infinite Yield", function()
    local success, result = pcall(function()
        loadstring(game:HttpGet("https://raw.githubusercontent.com/EdgeIY/infiniteyield/master/source"))()
    end)
    if success then
        print("Infinite Yield executed!")
    else
        print("Error executing Infinite Yield")
    end
end)

createButton("Dex Explorer", function()
    local success, result = pcall(function()
        loadstring(game:HttpGet("https://raw.githubusercontent.com/infyiff/backup/main/dex.lua"))()
    end)
    if success then
        print("Dex Explorer executed!")
    else
        print("Error executing Dex Explorer")
    end
end)

-- ‚úÖ Notification when script loads
StarterGui:SetCore("SendNotification", {
    Title = "Granny Script Loaded!";
    Text = "All features are ready.";
    Duration = 10;
})

-- ‚úÖ ESP helper
local function highlightTarget(target, color)
    local highlight = Instance.new("Highlight")
    highlight.Adornee = target
    highlight.FillColor = color
    highlight.OutlineColor = Color3.fromRGB(255, 255, 255)
    highlight.FillTransparency = 0.5
    highlight.OutlineTransparency = 0
    highlight.Parent = target
end

-- ‚úÖ Tracer helper
local function createTracer(target, color)
    local RunService = game:GetService("RunService")
    local camera = workspace.CurrentCamera
    local line = Drawing.new("Line")
    line.Visible = true
    line.Color = color
    line.Thickness = 2

    -- Update tracer position every frame
    local connection
    connection = RunService.RenderStepped:Connect(function()
        if target and target:FindFirstChild("HumanoidRootPart") and target:FindFirstChildOfClass("Humanoid") then
            local hrp = target:FindFirstChild("HumanoidRootPart")
            local pos, onScreen = camera:WorldToViewportPoint(hrp.Position)
            if onScreen then
                line.From = Vector2.new(camera.ViewportSize.X / 2, camera.ViewportSize.Y) -- from bottom center of screen
                line.To = Vector2.new(pos.X, pos.Y)
                line.Visible = true
            else
                line.Visible = false
            end
        else
            line.Visible = false
            connection:Disconnect()
            line:Remove()
        end
    end)
end

-- ‚úÖ Floating Name helper
local function createNameTag(target, text, color)
    local billboard = Instance.new("BillboardGui")
    billboard.Name = "NameTag"
    billboard.Size = UDim2.new(0, 200, 0, 50)
    billboard.StudsOffset = Vector3.new(0, 3, 0)
    billboard.AlwaysOnTop = true
    billboard.MaxDistance = 500
    billboard.Parent = target

    local label = Instance.new("TextLabel")
    label.Size = UDim2.new(1, 0, 1, 0)
    label.BackgroundTransparency = 1
    label.Text = text
    label.TextColor3 = color
    label.TextStrokeTransparency = 0
    label.TextScaled = true
    label.Font = Enum.Font.SourceSansBold
    label.Parent = billboard
end

createButton("Player ESP", function()
    local Players = game:GetService("Players")
    local LocalPlayer = Players.LocalPlayer

    local ESP_COLOR = Color3.fromRGB(0, 255, 0) -- Green

    -- Function to ESP a single character model
    local function applyPlayerESP(character, player)
        if not character then return end
        if character:FindFirstChild("HumanoidRootPart") == nil then return end

        -- Prevent duplicate ESP
        if character:FindFirstChild("PlayerESP_Highlight") then return end

        -- Highlight
        local highlight = Instance.new("Highlight")
        highlight.Name = "PlayerESP_Highlight"
        highlight.Adornee = character
        highlight.FillColor = ESP_COLOR
        highlight.OutlineColor = Color3.fromRGB(255, 255, 255)
        highlight.FillTransparency = 0.5
        highlight.OutlineTransparency = 0
        highlight.Parent = character

        -- Tracer
        createTracer(character, ESP_COLOR)

        -- Name tag
        createNameTag(character, player.Name, ESP_COLOR)
    end

    -- Apply ESP for all current players
    for _, player in ipairs(Players:GetPlayers()) do
        if player ~= LocalPlayer then
            if player.Character then
                applyPlayerESP(player.Character, player)
            end
        end
    end

    -- When a new character spawns, apply ESP again
    Players.PlayerAdded:Connect(function(player)
        player.CharacterAdded:Connect(function(char)
            task.wait(1)
            applyPlayerESP(char, player)
        end)
    end)

    -- Also detect respawns for already-joined players
    for _, player in ipairs(Players:GetPlayers()) do
        if player ~= LocalPlayer then
            player.CharacterAdded:Connect(function(char)
                task.wait(1)
                applyPlayerESP(char, player)
            end)
        end
    end
end)

-- ‚úÖ Add Buttons Below

createButton("Granny ESP", function()
    local granny = nil
    
    -- Look for Granny in Preset1‚ÄìPreset5
    for i = 1, 5 do
        local preset = workspace:FindFirstChild("Preset" .. i)
        if preset and preset:FindFirstChild("Locks") and preset.Locks:FindFirstChild("Granny") then
            granny = preset.Locks.Granny
            break
        end
    end

    if not granny or not granny:IsA("Model") then
        ErrorLog.Text = "Error Log: Granny not found in Preset1 to Preset5"
        return
    end

    -----------------------------------------------------------------------
    -- FUNCTION: applies ESP (Highlight + Tracer + NameTag)
    -----------------------------------------------------------------------
    local function applyESP()
        -- Highlight
        if not granny:FindFirstChildOfClass("Highlight") then
            local highlight = Instance.new("Highlight")
            highlight.Name = "GrannyESP"
            highlight.Parent = granny
            highlight.Adornee = granny
            highlight.FillTransparency = 1
            highlight.OutlineTransparency = 0
            highlight.OutlineColor = Color3.fromRGB(255, 0, 0)
            highlight.DepthMode = Enum.HighlightDepthMode.AlwaysOnTop
        end

        -- Tracer
        createTracer(granny, Color3.fromRGB(255, 0, 0))

        -- Name Tag
        if not granny:FindFirstChild("NameTag") then
            createNameTag(granny, "Granny", Color3.fromRGB(255, 0, 0))
        end
    end

    -----------------------------------------------------------------------
    -- FUNCTION: removes ESP entirely so it can be reapplied after respawn
    -----------------------------------------------------------------------
    local function removeESP()
        local highlight = granny:FindFirstChild("GrannyESP")
        if highlight then highlight:Destroy() end

        local nameTag = granny:FindFirstChild("NameTag")
        if nameTag then nameTag:Destroy() end

        -- Remove tracers if your tracer system stores them inside Granny
        for _, obj in pairs(granny:GetChildren()) do
            if obj.Name == "Tracer" then
                obj:Destroy()
            end
        end
    end

    -----------------------------------------------------------------------
    -- Apply ESP initially
    -----------------------------------------------------------------------
    applyESP()

    -----------------------------------------------------------------------
    -- CONSTANT CHECK LOOP FOR RESPAWN EVENTS
    -----------------------------------------------------------------------
    task.spawn(function()
        local respawnObj = workspace.Preset5.Locks.Granny:FindFirstChild("Respawn")
        if not respawnObj then return end

        local WasCrossbow = respawnObj:FindFirstChild("WasCrossbow")
        local WasShotgun = respawnObj:FindFirstChild("WasShotgun")

        if not WasCrossbow or not WasShotgun then return end

        while true do
            task.wait(0.2) -- Check 5 times per second

            -- CROSSBOW: Granny gone for 1 minute
            if WasCrossbow.Value == true then
                removeESP()
                task.wait(65) -- 1 minute
                applyESP()
                WasCrossbow.Value = false
            end

            -- SHOTGUN: Granny gone for 1 minute 30 seconds
            if WasShotgun.Value == true then
                removeESP()
                task.wait(95) -- 1 min 30 sec
                applyESP()
                WasShotgun.Value = false
            end
        end
    end)
end)

createButton("Slendrina Mother ESP", function()
    local mother = nil

    for i = 1, 5 do
        local preset = workspace:FindFirstChild("Preset" .. i)
        if preset and preset:FindFirstChild("Locks") and preset.Locks:FindFirstChild("SlendrinaMother") then
            mother = preset.Locks.SlendrinaMother
            break
        end
    end

    if mother and mother:IsA("Model") then
        -- Highlight
        if not mother:FindFirstChildOfClass("Highlight") then
            local highlight = Instance.new("Highlight")
            highlight.Name = "SlendrinaESP"
            highlight.Parent = mother
            highlight.Adornee = mother
            highlight.FillTransparency = 1
            highlight.OutlineTransparency = 0
            highlight.OutlineColor = Color3.fromRGB(255, 105, 180) -- Pink
            highlight.DepthMode = Enum.HighlightDepthMode.AlwaysOnTop
        end

        -- Tracer
        createTracer(mother, Color3.fromRGB(255, 105, 180))

        -- Name Tag
        if not mother:FindFirstChild("NameTag") then
            createNameTag(mother, "Slendrina's Mother", Color3.fromRGB(255, 105, 180))
        end
    else
        ErrorLog.Text = "Error Log: Slendrina's Mother not found in Preset1 to Preset5"
    end
end)

createButton("Item ESP", function()
    local itemNames = {
        "A part of a shotgun (1)", "A part of a shotgun (2)", "A part of a shotgun (3)",
        "Battery", "Bird seed", "Book", "Car battery", "Car key", "Chain cutter",
        "Cogwheel (Orange)", "Cogwheel (Red)", "Cutting pliers", "Engine part",
        "Gasoline can", "Master key", "Meat", "Playhouse key", "Remote control",
        "Rusty padlock key", "Safekey", "Spark plug", "Special key", "Weapon key",
        "Wheel crank", "Winch handle", "Wrench", "Padlock code", "Wooden stick"
    }

    for i = 1, 5 do
        local preset = workspace:FindFirstChild("Preset" .. i)
        if preset then
            for _, name in ipairs(itemNames) do
                local item = preset:FindFirstChild(name)
                if item then
                    -- Check for and apply Highlight
                    if not item:FindFirstChildOfClass("Highlight") then
                        local highlight = Instance.new("Highlight")
                        highlight.Name = "ItemESP"
                        highlight.Adornee = item
                        highlight.Parent = item
                        highlight.FillTransparency = 1 -- Outline only
                        highlight.OutlineTransparency = 0
                        highlight.OutlineColor = Color3.fromRGB(0, 255, 0) -- Green
                        highlight.DepthMode = Enum.HighlightDepthMode.AlwaysOnTop -- X-ray
                    end

                    -- Check for and apply BillboardGui for name text
                    if not item:FindFirstChild("ItemLabel") then
                        local billboard = Instance.new("BillboardGui")
                        billboard.Name = "ItemLabel"
                        billboard.Size = UDim2.new(0, 200, 0, 50)
                        billboard.AlwaysOnTop = true
                        billboard.StudsOffset = Vector3.new(0, 2, 0)
                        billboard.Adornee = item
                        billboard.Parent = item

                        local label = Instance.new("TextLabel")
                        label.Size = UDim2.new(1, 0, 1, 0)
                        label.BackgroundTransparency = 1
                        label.TextColor3 = Color3.fromRGB(255, 255, 255)
                        label.TextStrokeTransparency = 0
                        label.Text = name
                        label.TextScaled = true
                        label.Font = Enum.Font.GothamBold
                        label.Parent = billboard
                    end
                end
            end
        end
    end
end)

createButton("Get All Items", function()
    local player = game.Players.LocalPlayer
    local backpack = player:FindFirstChild("Backpack")
    local character = player.Character or player.CharacterAdded:Wait()

    -- ‚úÖ Helper: check if player already has tool
    local function hasTool(toolName)
        return backpack:FindFirstChild(toolName) or character:FindFirstChild(toolName)
    end

    -- ‚úÖ Helper: try to fire or clone item
    local function obtainItem(item)
        if not item then return end
        if item:FindFirstChild("InteractRemote") then
            item.InteractRemote:FireServer(player)
            print("Picked up via InteractRemote:", item.Name)
        elseif item:IsA("Tool") then
            local clone = item:Clone()
            clone.Parent = backpack
            print("Manually cloned tool:", item.Name)
        else
            print("‚ö†Ô∏è Unable to pick up item:", item.Name)
        end
        task.wait(0.1)
    end

    -- ‚úÖ Step 1: Grab interactable items from all Presets
    for i = 1, 10 do
        local preset = workspace:FindFirstChild("Preset" .. i)
        if preset then
            for _, item in pairs(preset:GetChildren()) do
                if item:FindFirstChild("InteractRemote") then
                    obtainItem(item)
                end
            end
        end
    end

    -- ‚úÖ Step 2: Ensure key items are collected
    local keyItems = {"Winch handle", "Melon", "Hammer", "Padlock key"}
    for _, itemName in ipairs(keyItems) do
        if not hasTool(itemName) then
            for i = 1, 10 do
                local preset = workspace:FindFirstChild("Preset" .. i)
                if preset and preset:FindFirstChild(itemName) then
                    obtainItem(preset[itemName])
                    break
                end
            end
        end
    end

    -- ‚úÖ Step 3: Get Spider Key from Locks
    for i = 1, 10 do
        local preset = workspace:FindFirstChild("Preset" .. i)
        if preset and preset:FindFirstChild("Locks") and preset.Locks:FindFirstChild("Spiderkey") then
            local spiderKey = preset.Locks.Spiderkey
            if not hasTool("Spider Key") then
                obtainItem(spiderKey)
            end
            break
        end
    end

    -- ‚úÖ Step 4: Get General Items
    local generalItems = workspace:FindFirstChild("General Items")
    if generalItems then
        local specialItems = {"Crossbow", "FreezeTrap", "Pepper spray"}
        for _, name in ipairs(specialItems) do
            local item = generalItems:FindFirstChild(name)
            if item then
                obtainItem(item)
            end
        end
    else
        warn("‚ö†Ô∏è General Items folder not found.")
    end

    print("‚úÖ All obtainable items have been collected or added!")
end)

createButton("Granny Ignores You", function()
    local grannyFolder = nil
    local foundPresetIndex = nil  -- ‚úÖ store which preset Granny was found in

    for i = 1, 5 do
        local preset = workspace:FindFirstChild("Preset" .. i)
        if preset and preset:FindFirstChild("Locks") and preset.Locks:FindFirstChild("Granny") then
            grannyFolder = preset.Locks.Granny
            foundPresetIndex = i
            break
        end
    end

    if grannyFolder then
        local toDestroy = {
            "CameraJumpscare1",
            "CameraJumpscare2",
            "Jumpscare"
        }

        for _, name in ipairs(toDestroy) do
            local obj = grannyFolder:FindFirstChild(name)
            if obj then
                obj:Destroy()
            end
        end

        -- ‚úÖ Use foundPresetIndex safely here
        if foundPresetIndex then
            local attackPath = workspace:FindFirstChild("Preset" .. foundPresetIndex)
            if attackPath and attackPath:FindFirstChild("Locks") and attackPath.Locks:FindFirstChild("Granny") and attackPath.Locks.Granny:FindFirstChild("Attack") then
                attackPath.Locks.Granny.Attack:Destroy()
            end
        end

        print("Granny will now ignore you!") -- ‚úÖ will print correctly now
    else
        ErrorLog.Text = "Error Log: Granny paths not found in Preset1 to Preset5."
    end
end)


createButton("Slendrina's Mother Ignores You", function()
    local motherFolder = nil

    for i = 1, 5 do
        local preset = workspace:FindFirstChild("Preset" .. i)
        if preset and preset:FindFirstChild("Locks") and preset.Locks:FindFirstChild("SlendrinaMother") then
            motherFolder = preset.Locks.SlendrinaMother
            break
        end
    end

    if motherFolder then
        local toDestroy = {
            "CameraJumpscare",
            "CameraJumpscare2",
            "Jumpscare"
        }

        for _, name in ipairs(toDestroy) do
            local obj = motherFolder:FindFirstChild(name)
            if obj then
                obj:Destroy()
            end
        end

        print("Slendrina's Mother will now ignore you!")
    else
        ErrorLog.Text = "Error Log: SlendrinaMother paths not found in Preset1 to Preset5."
    end
end)

createButton("Spider Ignores You", function()
    for i = 1, 10 do
        local preset = workspace:FindFirstChild("Preset" .. i)
        if preset and preset:FindFirstChild("Locks") then
            local locks = preset.Locks:GetChildren()
            for _, lock in pairs(locks) do
                local spider = lock:FindFirstChild("Spider")
                if spider then
                    -- Remove Damage and TouchInterest from Head
                    local head = spider:FindFirstChild("Head")
                    if head then
                        local damage = head:FindFirstChild("Damage")
                        if damage then damage:Destroy() end

                        local touchInterest = head:FindFirstChildWhichIsA("TouchTransmitter", true)
                        if touchInterest then touchInterest:Destroy() end
                    end

                    -- Remove ChaseScript
                    local chaseScript = spider:FindFirstChild("ChaseScript")
                    if chaseScript then chaseScript:Destroy() end
                end

                -- Remove CatchPlayer from the lock itself
                local catchPlayer = lock:FindFirstChild("CatchPlayer")
                if catchPlayer then catchPlayer:Destroy() end
            end
        end
    end

    print("All spiders should now ignore you across Presets 1 to 10.")
end)

createButton("Infinite Ammo", function()
    local Players = game:GetService("Players")
    local LocalPlayer = Players.LocalPlayer
    local ammo1 = LocalPlayer.Backpack:FindFirstChild("CrossbowAmmo")
    local ammo2 = LocalPlayer.Backpack:FindFirstChild("ShotgunAmmo")

    if ammo1 or ammo2 then
        -- Keep ammo at 1 forever
        task.spawn(function()
            while true do
                if ammo1 and ammo1.Value ~= 1 then
                    ammo1.Value = 1
                end
                if ammo2 and ammo2.Value ~= 1 then
                    ammo2.Value = 1
                end
                task.wait(0.1)
            end
        end)

        print("Infinite Ammo enabled!")

        -- Updated Notification
        game.StarterGui:SetCore("SendNotification", {
            Title = "üî´ Infinite Ammo Enabled",
            Text = "Your crossbow & shotgun ammo will both stay at 1 forever.",
            Duration = 5
        })
    else
        warn("Error: CrossbowAmmo or ShotgunAmmo not found in LocalPlayer.Backpack")
    end
end)

createButton("Remove Fall Animations", function()
    local paths = {
        workspace:FindFirstChild("GiveGUI")
            and workspace.GiveGUI:FindFirstChild("ShowGUI")
            and workspace.GiveGUI.ShowGUI:FindFirstChild("MainGUI")
            and workspace.GiveGUI.ShowGUI.MainGUI:FindFirstChild("FallSystem"),

        game:GetService("Players").LocalPlayer:FindFirstChild("PlayerGui")
            and game.Players.LocalPlayer.PlayerGui:FindFirstChild("MainGUI")
            and game.Players.LocalPlayer.PlayerGui.MainGUI:FindFirstChild("FallSystem")
    }

    for _, obj in pairs(paths) do
        if obj then
            obj:Destroy()
        end
    end

    print("Fall animations successfully removed!")
    game.StarterGui:SetCore("SendNotification", {
        Title = "Removed Fall Animations!",
        Text = "Removes the falling animation system for smoother movement.",
        Duration = 5
    })
end)

createButton("God Mode", function()
    local player = game:GetService("Players").LocalPlayer
    local char = player.Character or workspace:FindFirstChild(player.Name)

    if char then
        -- Optional God mode visual tweaks
        for _, part in pairs(char:GetDescendants()) do
            if part:IsA("BasePart") then
                part.CanCollide = false
                part.Anchored = false
                part.Transparency = 0.5
            end
        end

        -- Change Humanoid name to avoid detection (if it exists)
        local humanoid = char:FindFirstChildOfClass("Humanoid")
        if humanoid then
            humanoid.Name = "NotHumanoid"
        end

        -- Unanchor root part if found
        local root = char:FindFirstChild("HumanoidRootPart")
        if root then
            root.Anchored = false
        end

        -- Destroy target paths dynamically
        local function safeDestroy(path)
            if path then
                path:Destroy()
            end
        end

        safeDestroy(workspace:FindFirstChild(player.Name):FindFirstChild("Health"))
        safeDestroy(workspace:FindFirstChild(player.Name):FindFirstChild("HumanoidRootPart"):FindFirstChild("FreeFalling"))
        safeDestroy(workspace:FindFirstChild(player.Name):FindFirstChild("Animate"):FindFirstChild("fall"))
        safeDestroy(player:FindFirstChild("PlayerGui"):FindFirstChild("MainGUI"):FindFirstChild("FallSystem"))
    end
end)

createButton("Unlock Secret Ending", function()
    local found = false

    for i = 1, 10 do
        local preset = workspace:FindFirstChild("Preset" .. i)
        if preset and preset:FindFirstChild("Locks") then
            local locks = preset.Locks
            local isSecret = locks:FindFirstChild("IsSecretEnding")

            if isSecret and isSecret:IsA("BoolValue") then
                isSecret.Value = true
                ErrorLog.Text = "Error Log: Secret Ending unlocked! (Preset" .. i .. ")"
                found = true
                break
            end
        end
    end

    if not found then
        ErrorLog.Text = "Error Log: IsSecretEnding not found in any preset"
    end
end)

createButton("No Beartraps", function()
    local found = false

    for i = 1, 10 do
        local preset = workspace:FindFirstChild("Preset" .. i)
        if preset and preset:FindFirstChild("Locks") then
            local locks = preset.Locks
            if locks:FindFirstChild("Granny") then
                local granny = locks.Granny
                local beartrap = granny:FindFirstChild("BeartrapSpawn")

                if beartrap then
                    beartrap:Destroy()
                    ErrorLog.Text = "Error Log: Beartraps removed! (Preset" .. i .. ")"
                    found = true
                    break
                end
            end
        end
    end

    if not found then
        ErrorLog.Text = "Error Log: BeartrapSpawn not found in any preset"
    end
end)

createButton("Remove Backyard Door", function()
    local door = workspace:FindFirstChild("KeyCard Door")

    if door then
        door:Destroy()
        print("Backyard Door removed!")
    else
        warn("Error: KeyCard Door not found in workspace.")
        ErrorLog.Text = "Error Log: KeyCard Door not found."
    end
end)

createButton("Full Bright", function()
    Lighting.Ambient = Color3.new(1, 1, 1)
    Lighting.Brightness = 3
    Lighting.FogEnd = 100000
    Lighting.ClockTime = 14
end)

createButton("Unlock Camera", function()
    LocalPlayer.CameraMaxZoomDistance = 1000
    LocalPlayer.CameraMinZoomDistance = 0.5
end)

createButton("TP to Spawn", function()
    LocalPlayer.Character:PivotTo(CFrame.new(-305, 4, 11))
end)

createButton("TP to Backyard", function()
    LocalPlayer.Character:PivotTo(CFrame.new(-316, -4, 24))
end)

createButton("TP to Sewer", function()
    LocalPlayer.Character:PivotTo(CFrame.new(-329, -18, 35))
end)

createButton("TP to Chests", function()
    LocalPlayer.Character:PivotTo(CFrame.new(-335, -12, 22))
end)

createButton("Door Escape", function()
    LocalPlayer.Character:PivotTo(CFrame.new(-95.9118805, 60.7662735, 33.5642052, 1, 0, 0, 0, 1, 0, 0, 0, 1))
end)

createButton("Secret Ending", function()
    LocalPlayer.Character:PivotTo(CFrame.new(-95.6062012, 61.652523, 2.22535038, 1, 0, 0, 0, 1, 0, 0, 0, 1))
end)

createButton("Car Escape", function()
    LocalPlayer.Character:PivotTo(CFrame.new(-96.0078888, 57.293026, -32.4911461, 1, 0, 0, 0, 1, 0, 0, 0, 1))
end)

createButton("Sewer Escape", function()
    LocalPlayer.Character:PivotTo(CFrame.new(-342.852325, -17.6675205, 34.5113792, 1, 0, 0, 0, 1, 0, 0, 0, 1))
end)

